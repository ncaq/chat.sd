defaultTasks 'build'

allprojects {
    apply plugin: 'java'

    apply plugin: 'checkstyle'
    checkstyle.toolVersion = 6.6
    checkstyle.reportsDir = rootProject.file('build/reports/checkstyle')
    [checkstyleMain, checkstyleTest]*.configFile = rootProject.file('config/checkstyle/checkstyle.xml')

    apply plugin: 'pmd'
}

subprojects {
    repositories {
        mavenCentral()
    }
}

project(':server') {
    apply plugin: 'application'
    dependencies {
        compile project(':util')
        compile files('/usr/share/sqlite-jdbc/lib/sqlite-jdbc.jar')
    }
    run {
        mainClassName = 'net.ncaq.chat.sd.server.Main'
        systemProperty "java.library.path", "/usr/lib/sqlite-jdbc"
    }
}

project(':client') {
    apply plugin: 'application'
    dependencies {
        compile project(':util')
    }
    run {
        mainClassName = 'net.ncaq.chat.sd.client.Main'
    }
}

project(':util') {
}
